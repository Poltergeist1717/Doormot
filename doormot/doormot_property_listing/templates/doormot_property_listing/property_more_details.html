{% extends  "doormot_property_listing/listing_base_temp.html" %}
{% load static %}


{% block top-section %}
{% for property in property_model %}
{% if property %}

<div class="h-1/4 w-screen overflow-hidden bg-orange-600">
    <div class="shadow-sm border rounded-tr-2xl rounded-bl-2xl shadow-slate-800 overflow-hidden p-2">
        {% if first_image %}                 
        <div class="lazy-image m-1 overflow-hidden h-48">
            <img src="{{ first_image.images.url }}" alt="No image uploaded for this product" class="w-full h-48 rounded-sm object-cover">
        </div>
        {% else %}
        <div class="m-1 overflow-hidden h-48">
            <img src="{% static 'doormot_app/r3.png' %}" alt="No image uploaded for this product" class="w-full h-full object-cover">
        </div> 
        {% endif %}  
    </div>        
</div>

<div class="border-2 bg-white">
    <div class="block md:flex justify-between gap-4 px-2 py-3 shadow-sm border rounded-tr-2xl rounded-bl-2xl shadow-slate-800">
        <div class="flex justify-center gap-4 w-1/2 ml-5">
            <div class="flex gap-1 justify-center border text-sm rounded-md shadow-sm shadow-orange-600 p-2 m-2 w-48 bg-white">
                <div class="flex items-center justify-center">
                    <p class="font-serif hidden">Make Payment</p>
                    <button type="submit" id="for_sale" name="for_sale" value="Yes" class="flex bg-purple-700 hover:bg-orange-600 border border-orange-600 rounded-md text-white text-sm px-4 py-1">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24" fill="#ffffff">
                            <path d="M880-720v480q0 33-23.5 56.5T800-160H160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h640q33 0 56.5 23.5T880-720Zm-720 80h640v-80H160v80Zm0 160v240h640v-240H160Zm0 240v-480 480Z"/>
                        </svg>
                    </button>       
                </div>
                <div class="flex items-center justify-between">
                    <p class="font-serif hidden">Chat:</p>               
                    <button type="submit" id="for_sale" name="for_sale" value="No" class="flex bg-purple-700 hover:bg-orange-600 border border-orange-600 rounded-md text-white text-sm px-4 py-1"> 
                        <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24" fill="#ffffff">
                            <path d="M240-400h320v-80H240v80Zm0-120h480v-80H240v80Zm0-120h480v-80H240v80ZM80-80v-720q0-33 23.5-56.5T160-880h640q33 0 56.5 23.5T880-800v480q0 33-23.5 56.5T800-240H240L80-80Zm126-240h594v-480H160v525l46-45Zm-46 0v-480 480Z"/>
                        </svg>
                    </button> 
                </div>
                <div class="flex items-center justify-between">
                    <form method="get" enctype="multipart/form-data" action="{% url 'doormot_users_profiles_property_uploader_profile_views' property.uploaded_by %}" >
                        {% csrf_token %}
                        <input type="text" value="{{ property.uploaded_by }}" name="username" class="hidden">
                        <input type="text" value="{{ property.uploader_user_type }}" name="user_type" class="hidden">
                        <p class="font-serif hidden">View uploader's profile:</p>
                        <button type="submit" id="for_sale" name="for_sale" value="No" class=" bg-purple-700 hover:bg-orange-600 border border-orange-600 rounded-md text-white text-sm px-4 py-1">
                            <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24" fill="#ffffff">
                                <path d="M234-276q51-39 114-61.5T480-360q69 0 132 22.5T726-276q35-41 54.5-93T800-480q0-133-93.5-226.5T480-800q-133 0-226.5 93.5T160-480q0 59 19.5 111t54.5 93Zm246-164q-59 0-99.5-40.5T340-580q0-59 40.5-99.5T480-720q59 0 99.5 40.5T620-580q0 59-40.5 99.5T480-440Zm0 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q53 0 100-15.5t86-44.5q-39-29-86-44.5T480-280q-53 0-100 15.5T294-220q39 29 86 44.5T480-160Zm0-360q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm0-60Zm0 360Z"/>
                            </svg>
                        </button> 
                    </form>
                </div>
            </div>

            <div class="flex px-2 gap-1 justify-center border text-sm rounded-md shadow-sm shadow-orange-600 p-2 m-2 w-48 bg-white">
                <div class="flex items-center justify-between">
                    <p class="font-serif hidden">Bookmark</p>
                    <button type="submit" id="for_sale" name="for_sale" value="No" class=" bg-purple-700 hover:bg-orange-600 border border-orange-600 rounded-md text-white text-sm px-4 py-1">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z" />
                        </svg>
                    </button> 
                </div>
                <div class="flex items-center justify-between">
                    <p class="font-serif hidden">Book a tour:</p>
                    <button type="submit" id="for_sale" name="for_sale" value="No" class=" bg-purple-700 hover:bg-orange-600 border border-orange-600 rounded-md text-white text-sm px-4 py-1">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24" fill="#ffffff">
                            <path d="M200-80v-800h80v80h560l-80 200 80 200H280v320h-80Zm80-640v240-240Zm220 200q33 0 56.5-23.5T580-600q0-33-23.5-56.5T500-680q-33 0-56.5 23.5T420-600q0 33 23.5 56.5T500-520Zm-220 40h442l-48-120 48-120H280v240Z"/>
                        </svg>
                    </button> 
                </div>
                <div class="flex items-center justify-between">
                    <form method="get" enctype="multipart/form-data" action="{% url 'doormot-property-filter-property-by-username' %}">
                        {% csrf_token %}
                        <p class="font-serif hidden">View other properties by this user</p>
                        <input type="text" value="{{ property.uploaded_by }}" name="uploaded_by" class="hidden">
                        {% if for_sale == 'No' %}
                        <input type="text" value="{{ property.rent_price}}" name="max_price" class="hidden">
                        {% endif %}
                        {% if for_sale == 'Yes' %}
                        <input type="text" value="{{ property.asking_price}}" name="max_price" class="hidden">
                        {% endif %}
                        <input type="text" value="{{ property.uploader_user_type }}" name="user_type" class="hidden">
                        <input type="text" value="{{ for_sale }}" name="fors_sale" class="hidden">
                        <button type="submit" id="for_sale" name="for_sale" value="No" class=" bg-purple-700 hover:bg-orange-600 border border-orange-600 rounded-md text-white text-sm px-4 py-1">
                            <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24" fill="#ffffff">
                                <path d="M240-400q-33 0-56.5-23.5T160-480q0-33 23.5-56.5T240-560q33 0 56.5 23.5T320-480q0 33-23.5 56.5T240-400Zm240 0q-33 0-56.5-23.5T400-480q0-33 23.5-56.5T480-560q33 0 56.5 23.5T560-480q0 33-23.5 56.5T480-400Zm240 0q-33 0-56.5-23.5T640-480q0-33 23.5-56.5T720-560q33 0 56.5 23.5T800-480q0 33-23.5 56.5T720-400Z"/>
                            </svg>
                        </button> 
                    </form>
                </div>       
            </div>
        </div>

        <div class="w-1/2 justify-center pl-4">
            <div class="shadow-sm border rounded-tr-2xl rounded-bl-2xlshadow-slate-800  p-1 gap-4 border-sm text-center">
                <h1> No of people that have seen this property: {{ property.no_of_livingrooms }}</h1>
                <h1> No of people that have bookmarked: {{ property.no_of_bathrooms }}</h1>
            </div>   
        </div>
    </div>

    <div class="font-serif overflow-hidden block md:grid grid-cols-5 p-4 gap-4 shadow-sm border rounded-tr-2xl rounded-bl-2xl shadow-slate-800 mt-2">
        <div class="col-span-3 w-full border-2 px-6 justify-center items-center">
            <div class="block gap-4">
                <div class="w-full">
                    <div class="font-serif m-2 p-3 shadow-sm border rounded-tr-2xl rounded-bl-2xl shadow-slate-800 w-full">
                        <div class="block">
                            <h1> no_of_livingrooms: {{ property.no_of_livingrooms }}</h1>
                            <h1> no_of_bathrooms: {{ property.no_of_bathrooms }}</h1>
                            <h1> no_of_kitchens: {{ property.no_of_kitchens }}</h1>
                            <h1> size_of_property_by_square_footage: {{ property.size_of_property_by_square_footage }}</h1>
                            <h1> size_of_property_by_plot: {{ property.size_of_property_by_plot }}</h1>
                            <h1>date_time_of_upload: {{ property.date_time_of_upload }}</h1>
                        </div>                
                    </div>
            
                    <div class="font-serif m-2 p-3 shadow-sm border rounded-tr-2xl rounded-bl-2xl shadow-slate-800 w-full">
                        <div class="block">
                            <h1> description: {{ property.description }}</h1>
                            <h1> closest_landmark: {{ property.closest_landmark }}</h1>
                            <h1> size_of_property_by_square_footage: {{ property.size_of_property_by_square_footage }}</h1>
                            <h1> size_of_property_by_plot: {{ property.size_of_property_by_plot }}</h1>
                            <h1>date_time_of_upload: {{ property.date_time_of_upload }}</h1>
                        </div>                 
                    </div>
                </div>
        
                <div class="w-full">
                    <div class="font-serif m-2 p-3 shadow-sm border rounded-tr-2xl rounded-bl-2xl shadow-slate-800 w-full">
                        <div class="block">
                            <h1> no_of_livingrooms: {{ property.no_of_livingrooms }}</h1>
                            <h1> no_of_bathrooms: {{ property.no_of_bathrooms }}</h1>
                            <h1> no_of_kitchens: {{ property.no_of_kitchens }}</h1>
                            <h1> size_of_property_by_square_footage: {{ property.size_of_property_by_square_footage }}</h1>
                            <h1> size_of_property_by_plot: {{ property.size_of_property_by_plot }}</h1>
                            <h1>date_time_of_upload: {{ property.date_time_of_upload }}</h1>
                        </div>                  
                    </div>
            
                    <div class="font-serif m-2 p-3 shadow-sm border rounded-tr-2xl rounded-bl-2xl shadow-slate-800 w-full">
                        <div class="block">
                            <h1> description: {{ property.description }}</h1>
                            <h1> closest_landmark: {{ property.closest_landmark }}</h1>
                            <h1>size_of_property_by_square_footage: {{ property.size_of_property_by_square_footage }}</h1>
                            <h1> size_of_property_by_plot: {{ property.size_of_property_by_plot }}</h1>
                            <h1>date_time_of_upload: {{ property.date_time_of_upload }}</h1>
                        </div>                  
                    </div>
                </div>

                <div class="w-full">
                    <div class="font-serif m-2 p-3 shadow-sm border rounded-tr-2xl rounded-bl-2xl shadow-slate-800 w-full">
                        <div class="block">
                            <h1> no_of_livingrooms: {{ property.no_of_livingrooms }}</h1>
                            <h1> no_of_bathrooms: {{ property.no_of_bathrooms }}</h1>
                            <h1> no_of_kitchens: {{ property.no_of_kitchens }}</h1>
                            <h1> size_of_property_by_square_footage: {{ property.size_of_property_by_square_footage }}</h1>
                            <h1> size_of_property_by_plot: {{ property.size_of_property_by_plot }}</h1>
                            <h1>date_time_of_upload: {{ property.date_time_of_upload }}</h1>
                        </div>                  
                    </div>
            
                    <div class="font-serif m-2 p-3 shadow-sm border rounded-tr-2xl rounded-bl-2xl shadow-slate-800 w-full">
                        <div class="block">
                            <h1> description: {{ property.description }}</h1>
                            <h1> closest_landmark: {{ property.closest_landmark }}</h1>
                            <h1>size_of_property_by_square_footage: {{ property.size_of_property_by_square_footage }}</h1>
                            <h1> size_of_property_by_plot: {{ property.size_of_property_by_plot }}</h1>
                            <h1>date_time_of_upload: {{ property.date_time_of_upload }}</h1>
                        </div>                  
                    </div>
                </div>
            </div>
        </div>
        <div class="col-span-2 p-4 border-2">
            <div class="font-serif mr-2 shadow-sm border rounded shadow-slate-800 h-1/4 overflow-hidden">
                <div class="product-drawer w-full h-full p-2 border-4 border-orange-600">
                    <video controls class="w-full h-full bg-white">
                        <source src="{% static 'doormot_app/video.mp4' %}" type="video/mp4 object-cover" class="w-full h-full">
                        Your browser does not support the video tag.
                    </video>
                </div>                                  
            </div>

            <div class="p-1 mt-7 bg-purple-950 text-white text-center">
                <p>Related properties you might be interseted in</p>
            </div>

            <div>
                {% if advertisied_filtered_property_models %} 
                <div class="px-4 flex flex-wrap overflow-scroll">
                    {% for property_model in advertisied_filtered_property_models %}
                    <div class="w-full md:w-1/2 bg-white px-2 py-3">
                        <div class="text-center bg-purple-950 text-white text-sm w-full h-12 overflow-hidden p-2" id="property-display-box-{{ property_model.id }}" onmouseover="displayPropertyDetailsOverlay('{{ property_model.id }}')">
                            <small>{{ property_model.title }}</small>
                        </div>
                        <div class="border border-full shadow-md shadow-gray-600 overflow-hidden relative">
                            <div class="border border-full shadow-md shadow-gray-600 overflow-hidden p-2">
                                {% if for_sale == 'Yes' %}
                                {% with first_image=property_model.for_sale_properties_images_set.first %}
                                <div class="m-1 overflow-hidden h-48">
                                    <img src="{{ first_image.images.url }}" alt="No image uploaded for this product" class="w-full h-48 rounded-sm object-cover">
                                </div>
                                {% endwith %} 
                                {% endif %}
                                
                                {% if for_sale == 'No' %}
                                {% with first_image=property_model.to_let_properties_images_set.first %}
                                <div class="m-1 overflow-hidden h-48">
                                    <img src="{{ first_image.images.url }}" alt="No image uploaded for this product" class="w-full h-48 rounded-sm object-cover">
                                </div>
                                {% endwith %} 
                                {% endif %}

                                {% if for_sale == None %}
                                <div class="m-1 overflow-hidden h-48">
                                    <img src="{% static 'doormot_app/r3.png' %}" alt="No image uploaded for this product" class="w-full h-full object-cover">
                                </div>                 
                                {% endif %}
                                <div class="hidden" id="property-details-overlay-{{ property_model.id }}">
                                    <div class="font-serif flex gap-4 text-sm bg-purple-950 text-white p-2 absolute inset-0 opacity-80 w-full h-full">
                                        <div class="block">
                                            <small>Property ID: {{ property_model.property_id }}</small>
                                            <small>Uploaded by: {{ property_model.uploaded_by }}</small>
                                            <small>Owned By: {{ property_model.get_owned_by_display }}</small>
                                            {% if for_sale == 'Yes' %}
                                            <small> {{ price_tag }} Price: $ {{ property_model.asking_price }}</small>
                                            <small>Is Negotiable: {{ property.is_negotiable }}</small>
                                            {% endif %}
                                            {% if for_sale == 'No' %}
                                            <small> {{ price_tag }} Price: $ {{ property_model.rent_price }}</small>
                                            <small>Available For Lease: {{ property_model.is_available_for_lease }}</small>  
                                            {% endif %}

                                            {% if for_sale == None %}
                                            <small> {{ price_tag }} Price: $ {{ property_model.rent_price }}</small>    
                                            {% endif %}
                                        </div>
                                        <div class="block">
                                            <small> State: {{ property_model.state }}</small>
                                            <small> City/Town: {{ property_model.city }}</small>
                                            <small> LGA: {{ property_model.local_government }}</small>
                                            <small> Zip-Code: {{ property_model.zip_code }}</small>
                                            <small>Address: {{ property_model.address }}</small>
                                        </div>
                                    </div>
                                </div>

                                <div class="flex justify-center gap-4 p-2">
                                    <button action="#" method="get" id="book-mark-{{ property_model.id }}" onclick="changeBookMarkIcon('{{ property_model.id }}')" class="border border-gray-600 p-1">
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z" />
                                        </svg>  
                                    </button>
                                    <button action="#" method="get" id="cart" class="border border-gray-600 p-1 rounded-sm">
                                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                                            <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z" />
                                        </svg>
                                    </button> 
                                </div>

                                <div class="flex justify-end mb-2">
                                    <form method="get" action="{% url 'doormot-property-more-details' %}" enctype="multipart/form-data">
                                        {% csrf_token %}
                                        <input type="text" value="{{ property_model.id }}" name="property_model_id" class="hidden">
                                        <input type="text" value="{{ for_sale }}" name="for_sale" class="hidden">
                                        <button class="flex text-xs hover:text-red-600 hover:font-bold text-black font-thin" type="submit">
                                            <p>More details</p>
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="15" height="20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <path d="M5 12h13M12 5l7 7-7 7"/>
                                            </svg>   
                                        </button>
                                    </form>
                                </div> 
                                                    
                                <div class="bg-orange-600 h-2">                           
                                </div>
                                
                            </div>
                        </div>
                        
                    </div>
                    {% endfor %}  
                </div>
                 
                {% else %}
                <div class="bg-white text-red-600 font-extrabold text-xl text-center p-6 mt-6">
                    <h6>There is no available property that is closely related to this property yet!</h6>
                </div> 
                {% endif %} <!-- endif for filtered_property_models -->
            </div>
        </div>      
    </div>    
</div>


<div class="p-6 flex flex-wrap justify-center">
    <div class="shadow-sm border rounded-tr-2xl rounded-bl-2xl shadow-slate-800 overflow-hidden p-2">
        <div class="lazy-image flex">
            {% if all_images%}
            {% for image in all_images %}                 
            <div class="m-1 overflow-hidden h-48 shadow-sm border rounded-tr-2xl rounded-bl-2xl shadow-slate-800 p-2">
                <img src="{{ image.images.url }}" alt="No image uploaded for this product" class="w-full h-48 rounded-sm object-cover">
            </div>
            {% endfor %}
            {% else %}
            <div class="m-1 overflow-hidden h-48">
                <img src="{% static 'doormot_app/r3.png' %}" alt="No image uploaded for this product" class="w-full h-full object-cover">
            </div> 
            {% endif %}
        </div>
        
    </div>
</div>              

            

        
{% endif %}
{% endfor %}
{% endblock top-section %}







{% block free-section %}
<div class="bg-black w-full grid grid-cols-2 py-10">
    <div class="px-3 py-1 m-2 col-span-1">
        <div class="text-5xl font-serif py-2 m-2 font-extrabold text-orange-600 text-center bg-black rounded-lg">
            <h6>Discover Your<br>Perfect <span class="text-white">HOME</span></h6>
        </div>
    </div>
    <div class="text-white px-3 py-2 m-2 col-span-1">
        <p>Helping renters and buyers find the perfect property.</p>
        <p>Explore and experience property rentals and sales in the most modern way</p>
        <div class="text-3xl font-serif py-2 m-2 font-extrabold text-white text-start bg-black rounded-lg">
            <h6>Buy, Sell, Rent and Lease With Ease!</h6>
        </div>
    </div>
</div>
{% endblock free-section %}